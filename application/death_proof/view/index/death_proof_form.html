<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-body" style="padding: 15px;">
            <form class="layui-form" action="{:url()}" method="post" id="editForm">
                <div class="layui-form-item">
                    <label class="layui-form-label">姓名:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="name" lay-verify="required"  placeholder="请填写人员姓名" class="layui-input field-name">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">身份证号:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="id_number" lay-verify="required"   placeholder="请填写身份证号" class="layui-input field-id_number">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">户籍地址:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="residence_address" lay-verify="required" placeholder="请填写户籍地址" class="layui-input field-residence_address">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">现居住地址:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="present_address" lay-verify="required" placeholder="请填写居住地址" class="layui-input field-present_address">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">死亡时间:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="death_date" lay-verify="required" placeholder="请填写死亡时间" class="layui-input field-death_date" id="death_date">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">死亡地点:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="death_address" lay-verify="required" placeholder="请填写死亡地点" class="layui-input field-death_address">
                    </div>
                </div>
                <hr>
                <div class="layui-form-item">
                    <label class="layui-form-label">申请人:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="applicant" lay-verify="required"  placeholder="" class="layui-input field-applicant">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">申请人身份证:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="applicant_id_number" lay-verify="required"  placeholder="" class="layui-input field-applicant_id_number">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">与死者关系:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="radio" class="field-applicant_death_relation" name="applicant_death_relation" value="1" title="配偶" checked>
                        <input type="radio" class="field-applicant_death_relation" name="applicant_death_relation" value="2" title="子女">
                        <input type="radio" class="field-applicant_death_relation" name="applicant_death_relation" value="3" title="父母">
                    </div>
                </div>
                <hr>
                <div class="layui-form-item">
                    <label class="layui-form-label">委托人:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="agent"  placeholder="" class="layui-input field-agent">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">委托人身份证:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="agent_id_number"  placeholder="" class="layui-input field-agent_id_numnber">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">与申请人关系:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="agent_applicant_relation"  placeholder="" class="layui-input field-agent_application_relation">
                    </div>
                </div>
                <hr>
                <div class="layui-form-item">
                    <label class="layui-form-label">其它:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="other"  placeholder="" class="layui-input field-other">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">图片上传:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input class="file form-control"  placeholder="" name="image"  type="file"  id="img" multiple>
                    </div>
                </div>
                <div class="col-sm-6" id="image_paths">
                </div>
                {if (request()->action() == 'add')}
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        {:token()}
                    </div>
                </div>
                <div class="pop-bottom-bar hisi-footer">
                    <button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="formSubmit" >提交保存</button>
                    <a href="{:url('index')}" class="layui-btn layui-btn-primary ml10">返回</a>
                </div>
                {else /}
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        {:token()}
                    </div>
                    <input type="hidden" class="field-id" name="id">
                </div>
                <div class="pop-bottom-bar hisi-footer">
                    <button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="formSubmit" >提交修改</button>
                    <a href="{:url('index')}" class="layui-btn layui-btn-primary ml10">返回</a>
                </div>
                {/if}
            </form>
        </div>
    </div>
</div>
{include file="system@block/layui" /}
<script>
    var formData = {:json_encode($formData)};
    layui.use(['form', 'func','upload','laydate'], function() {
        var $ = layui.jquery,
            form = layui.form ,
            uplaod=layui.upload
            laydata=layui.laydate;
        layui.func.assign(formData);


        laydata.render({
            elem:"#death_date"
        })

    });
</script>

{include file="system@block/fileinput" /}
<script>
    var upload_url="{$upload_url}";

    {if (request()->action() == 'add')}
    init_multiple('img',[],[],upload_url);
    {else/}
        var image_url="{$image_url}";
        get_images('img',image_url,upload_url);
        {/if}

            $('#img').on("fileuploaded",function(event, data, previewId, index){
                var path=data.response.path;
                var html_str='<input name="image_path[]"  type="hidden" value="'+path+'">';
                $("#image_paths").append(html_str);


            });
</script>