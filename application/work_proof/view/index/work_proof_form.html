<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-body" style="padding: 15px;">
            <form class="layui-form" action="{:url()}" method="post" id="editForm">
                <div class="layui-form-item">
                    <label class="layui-form-label">人员姓名:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="name" lay-verify="required"  placeholder="请填写人员姓名" class="layui-input field-name">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">身份证号:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="id_number" lay-verify="required"   placeholder="请填写身份证号" class="layui-input field-id_number">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">现居住地址:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="present_address" lay-verify="required" placeholder="请填写居住地址" class="layui-input field-present_address">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">联系电话:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="phone" lay-verify="required" placeholder="请填写联系电话" class="layui-input field-phone">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">灵活就业内容:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="work_content" lay-verify="required" placeholder="请填写就业内容" class="layui-input field-work_content">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">工作地点:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="work_place" lay-verify="required" placeholder="请填写工作地点" class="layui-input field-work_place">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">随迁子女:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="child_name" lay-verify="required" placeholder="请填写子女姓名" class="layui-input field-child_name">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">子女性别:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="radio" class="field-child_sex" name="child_sex" value="1" title="男" checked>
                        <input type="radio" class="field-child_sex" name="child_sex" value="0" title="女">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">子女身份证号:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input type="text" name="child_id_number" lay-verify="required" placeholder="请填写子女身份证号" class="layui-input field-child_id_number">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">图片上传:</label>
                    <div class="layui-input-inline" style="width: 75%;">
                        <input class="file form-control"  placeholder="" name="image"  type="file"  id="img" multiple>
                    </div>
                </div>
                <div id="image_paths">
                </div>
                {if (request()->action() == 'add')}
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        {:token()}
                    </div>
                </div>
                <div class="pop-bottom-bar hisi-footer">
                    <button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="formSubmit" >提交保存</button>
                    <a href="{:url('index')}" class="layui-btn layui-btn-primary ml10">返回</a>
                </div>
                {else /}
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        {:token()}
                    </div>
                    <input type="hidden" class="field-id" name="id">
                </div>
                <div class="pop-bottom-bar hisi-footer">
                    <button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="formSubmit" >提交修改</button>
                    <a href="{:url('index')}" class="layui-btn layui-btn-primary ml10">返回</a>
                </div>
                {/if}
            </form>
        </div>
    </div>
</div>
{include file="system@block/layui" /}
<script>
    var formData = {:json_encode($formData)};
    layui.use(['form', 'func','upload'], function() {
        var $ = layui.jquery, form = layui.form ,uplaod=layui.upload;
        layui.func.assign(formData);

        uplaod.render({
            elem: '#upload_images',
            url:"aa"
            ,multiple: true
            ,before: function(obj){
                    //预读本地文件示例，不支持ie8
                    obj.preview(function(index, file, result){
                        $('#upload-more-list').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
                    });
                }
            ,done: function(res){
                    //上传完毕
                }
                });


    });
</script>
{include file="system@block/fileinput" /}
<script>
    var upload_url="{$upload_url}";

    {if (request()->action() == 'add')}
    init_multiple('img',[],[],upload_url);
    {else/}
        var image_url="{$image_url}";
        get_images('img',image_url,upload_url);
        {/if}

            $('#img').on("fileuploaded",function(event, data, previewId, index){
                var path=data.response.path;
                var html_str='<input name="image_path[]"  type="hidden" value="'+path+'">';
                $("#image_paths").append(html_str);


            });
</script>